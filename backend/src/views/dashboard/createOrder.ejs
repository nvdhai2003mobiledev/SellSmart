<%- include('../layouts/main.ejs') %>
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T·∫°o ƒê∆°n H√†ng</title>
  
    <script>
      function validateOrderData() {
    let customerID = document.getElementById("customerID").value;  // L·∫•y t·ª´ input ·∫©n
    let customerName = document.getElementById("customerName").value;
    let customerPhone = document.getElementById("customerPhone").value;
    let customerEmail = document.getElementById("customerEmail").value;
    let customerAddress = document.getElementById("customerAddress").value;
    // let paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
    let shippingNotes = document.getElementById("shippingNotes").value;

    // Ki·ªÉm tra n·∫øu ch∆∞a ch·ªçn kh√°ch h√†ng
    if (!customerID) {
        alert("Vui l√≤ng ch·ªçn kh√°ch h√†ng t·ª´ danh s√°ch!");
        return false;
    }

    if (!customerName || !customerPhone || !customerEmail || !customerAddress) {
        alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin kh√°ch h√†ng!");
        return false;
    }

    if (selectedProducts.length === 0) {
        alert("B·∫°n c·∫ßn ch·ªçn √≠t nh·∫•t m·ªôt s·∫£n ph·∫©m!");
        return false;
    }

    // if (!paymentMethod) {
    //     alert("Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n!");
    //     return false;
    // }

    return {
        customerID,
        products: selectedProducts.map(p => ({
            productID: p.productID,
            name: p.name,
            inventory: p.inventory,
            price: p.price,
            attributes: Object.entries(p.attributes).map(([key, value]) => ({
                name: key,
                value: [value]  // M·∫£ng gi√° tr·ªã theo schema
            }))
        })),
        totalAmount: selectedProducts.reduce((sum, p) => sum + (p.price * p.quantity), 0),
        paymentMethod: 'cash',
        shippingAddress: customerAddress,
        notes: shippingNotes || ""
    };
}


function createOrder() {
    let orderData = validateOrderData();
    if (!orderData) return;

    fetch("http://localhost:3000/orders", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(orderData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert("ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!");
            window.location.href = "http://localhost:3000/orders"; // Chuy·ªÉn v·ªÅ danh s√°ch ƒë∆°n h√†ng
        } else {
            alert("C√≥ l·ªói khi t·∫°o ƒë∆°n h√†ng: " + data.message);
        }
    })
    .catch(error => console.error("L·ªói:", error));
}

let selectedProducts = [];
let selectedAttributes = {}; // L∆∞u c√°c thu·ªôc t√≠nh ƒë√£ ch·ªçn c·ªßa s·∫£n ph·∫©m

function openProductDialog() {
    document.getElementById("productDialog").style.display = "block";
}

function closeProductDialog() {
    // Reset t·∫•t c·∫£ d·ªØ li·ªáu thu·ªôc t√≠nh ƒë√£ ch·ªçn khi ƒë√≥ng dialog ch·ªçn s·∫£n ph·∫©m
    selectedAttributes = {};
    document.getElementById("productDialog").style.display = "none";

    // Reset checkbox s·∫£n ph·∫©m v√† disable l·∫°i
    document.querySelectorAll("input[type=checkbox][id^=productCheckbox]").forEach(checkbox => {
        checkbox.checked = false;
        checkbox.disabled = true;
    });

    // Reset hi·ªÉn th·ªã thu·ªôc t√≠nh
    document.querySelectorAll("[id^=selected-attributes]").forEach(span => {
        span.innerText = "Ch∆∞a ch·ªçn";
    });
}

function openAttributeDialog(productID, productName, attributes) {
    let attributeDiv = document.getElementById("attributeOptions");
    attributeDiv.innerHTML = `<h4>Thu·ªôc t√≠nh cho <b>${productName}</b></h4>`;

    document.getElementById("attributeDialog").dataset.productId = productID;
    document.getElementById("attributeDialog").dataset.attributes = JSON.stringify(attributes);

    attributes.forEach(attribute => {
        let optionsHTML = `<p><b>${attribute.name}</b></p>`;
        optionsHTML += `<div class="attribute-group">`;

        attribute.values.forEach(value => {
            let isChecked = selectedAttributes[productID] && selectedAttributes[productID][attribute.name] === value;
            optionsHTML += `
                <label class="attribute-item">
                    <input type="checkbox" name="attr-${productID}-${attribute.name}" value="${value}" 
                           ${isChecked ? 'checked' : ''} 
                           onchange="updateAttributeSelection('${productID}', '${attribute.name}', '${value}', this)">
                    ${value}
                </label>
            `;
        });

        optionsHTML += `</div>`;
        attributeDiv.innerHTML += optionsHTML;
    });

    document.getElementById("attributeDialog").style.display = "block";
}

function closeAttributeDialog() {
    document.getElementById("attributeDialog").style.display = "none";
}

function updateAttributeSelection(productID, attributeName, value, checkbox) {
    if (!selectedAttributes[productID]) {
        selectedAttributes[productID] = {};
    }

    // H·ªßy ch·ªçn t·∫•t c·∫£ checkbox kh√°c trong nh√≥m
    document.querySelectorAll(`input[name="attr-${productID}-${attributeName}"]`).forEach(cb => {
        if (cb !== checkbox) cb.checked = false;
    });

    selectedAttributes[productID][attributeName] = value;

    // Ki·ªÉm tra n·∫øu ƒë√£ ch·ªçn ƒë·ªß thu·ªôc t√≠nh -> b·∫≠t checkbox s·∫£n ph·∫©m
    checkAndEnableProductCheckbox(productID);
}

function checkAttributesSelected(productID, attributes) {
    let selectedValues = selectedAttributes[productID] || {};
    return attributes.every(attr => selectedValues[attr.name]);
}

function checkAndEnableProductCheckbox(productID) {
    let attributes = JSON.parse(document.getElementById("attributeDialog").dataset.attributes);
    let checkbox = document.getElementById(`productCheckbox-${productID}`);

    if (checkAttributesSelected(productID, attributes)) {
        checkbox.disabled = false; // B·∫≠t checkbox khi ƒë√£ ch·ªçn ƒë·ªß thu·ªôc t√≠nh
    } else {
        checkbox.disabled = true; // V√¥ hi·ªáu h√≥a n·∫øu ch∆∞a ch·ªçn ƒë·ªß
    }
}

function toggleProductSelection(checkbox, productID, name, price, thumbnail, inventory, attributesJSON) {
    let attributes;
    try {
        attributes = JSON.parse(attributesJSON);
    } catch (e) {
        console.error("L·ªói parse JSON:", e);
        attributes = [];
    }

    if (!checkAttributesSelected(productID, attributes)) {
        alert("B·∫°n c·∫ßn ch·ªçn ƒë·∫ßy ƒë·ªß t·∫•t c·∫£ c√°c thu·ªôc t√≠nh tr∆∞·ªõc khi ch·ªçn s·∫£n ph·∫©m!");
        checkbox.checked = false;
        return;
    }

    let productIndex = selectedProducts.findIndex(p => p.productID === productID);
    if (checkbox.checked) {
        if (productIndex === -1) {
            selectedProducts.push({
                productID,
                name,
                price,
                thumbnail,
                inventory,
                quantity: 1, 
                attributes: selectedAttributes[productID] || {}
            });
        }
    } else {
        if (productIndex !== -1) {
            selectedProducts.splice(productIndex, 1);
        }
    }
}

function saveSelectedProducts() {
    updateSelectedProductsTable();
    closeProductDialog();
}

function updateSelectedProductsTable() {
    let productTable = document.getElementById("selectedProducts");
    productTable.innerHTML = "";

    let totalAmount = 0;

    selectedProducts.forEach((product, index) => {
        let totalPrice = product.price * product.quantity;
        totalAmount += totalPrice;

        let attributesText = Object.entries(product.attributes || {})
            .map(([key, value]) => `${key}: ${value}`)
            .join(', ') || "Ch∆∞a ch·ªçn";

        productTable.innerHTML += `
            <tr>
                <td><img src="${product.thumbnail}" width="50"></td>
                <td>${product.name}</td>
                <td>${attributesText}</td>
                <td>${product.inventory}</td>
                <td>${product.price.toLocaleString()} VND</td>
                <td>
                    <input type="number" value="${product.quantity}" min="1" max="${product.inventory}" 
                           onchange="updateQuantity(${index}, this.value)" style="width: 60px;">
                </td>
                <td>${totalPrice.toLocaleString()} VND</td>
                <td><button class="delete-btn" onclick="removeProduct(${index}, '${product.productID}')">‚ùå</button></td>
            </tr>
        `;
    });

    document.getElementById("totalAmount").innerText = totalAmount.toLocaleString() + " VND";
}

function updateQuantity(index, quantity) {
    selectedProducts[index].quantity = parseInt(quantity);
    updateSelectedProductsTable();
}

function removeProduct(index, productID) {
    selectedProducts.splice(index, 1);
    delete selectedAttributes[productID]; // X√≥a thu·ªôc t√≠nh ƒë√£ ch·ªçn c·ªßa s·∫£n ph·∫©m ƒë√≥
    updateSelectedProductsTable();

    // Reset checkbox trong dialog ch·ªçn s·∫£n ph·∫©m
    let productCheckbox = document.getElementById(`productCheckbox-${productID}`);
    if (productCheckbox) {
        productCheckbox.checked = false;
        productCheckbox.disabled = true;
    }

    // Reset hi·ªÉn th·ªã thu·ªôc t√≠nh
    let attributeSpan = document.getElementById(`selected-attributes-${productID}`);
    if (attributeSpan) {
        attributeSpan.innerText = "Ch∆∞a ch·ªçn";
    }
}

function saveAttributeSelection() {
    let productID = document.getElementById("attributeDialog").dataset.productId;
    let productAttributes = JSON.parse(document.getElementById("attributeDialog").dataset.attributes);

    let allSelected = true;
    let selectedValues = {};

    productAttributes.forEach(attribute => {
        let selected = document.querySelector(`input[name="attr-${productID}-${attribute.name}"]:checked`);
        if (selected) {
            selectedValues[attribute.name] = selected.value;
        } else {
            allSelected = false;
        }
    });

    if (!allSelected) {
        alert("B·∫°n c·∫ßn ch·ªçn ƒë·∫ßy ƒë·ªß t·∫•t c·∫£ c√°c thu·ªôc t√≠nh tr∆∞·ªõc khi l∆∞u!");
        return;
    }

    selectedAttributes[productID] = selectedValues;

    document.getElementById(`selected-attributes-${productID}`).innerText = Object.entries(selectedValues)
        .map(([key, value]) => `${key}: ${value}`)
        .join(', ');

    closeAttributeDialog();
}


        function openCustomerDialog() {
            document.getElementById("customerDialog").style.display = "block";
        }

        function closeCustomerDialog() {
            document.getElementById("customerDialog").style.display = "none";
        }

  




        function toggleShippingInfo() {
        let shippingInfo = document.getElementById("shippingInfo");
        let selfDelivery = document.querySelector('input[name="shippingMethod"]:checked').value === "self";

        if (selfDelivery) {
            shippingInfo.style.display = "block"; // Hi·ªÉn th·ªã th√¥ng tin giao h√†ng

            // C·∫≠p nh·∫≠t th√¥ng tin t·ª´ ph·∫ßn nh·∫≠p kh√°ch h√†ng
            document.getElementById("shippingCustomerNameText").innerText = document.getElementById("customerName").value;
            document.getElementById("shippingCustomerPhoneText").innerText = document.getElementById("customerPhone").value;
            document.getElementById("shippingCustomerEmailText").innerText = document.getElementById("customerEmail").value;
            document.getElementById("shippingCustomerAddressText").innerText = document.getElementById("customerAddress").value;
        } else {
            shippingInfo.style.display = "none"; // ·∫®n khi ch·ªçn "Giao h√†ng qua ƒë∆°n v·ªã v·∫≠n chuy·ªÉn"
        }
    }

    function selectCustomer(id,name, phone, email, address) {
        // C·∫≠p nh·∫≠t th√¥ng tin kh√°ch h√†ng
        document.getElementById("customerID").value = id; 
        document.getElementById("customerName").value = name;
        document.getElementById("customerPhone").value = phone;
        document.getElementById("customerEmail").value = email;
        document.getElementById("customerAddress").value = address;

        toggleShippingInfo(); // C·∫≠p nh·∫≠t th√¥ng tin giao h√†ng khi ch·ªçn kh√°ch h√†ng
        closeCustomerDialog();
    }
    </script>
    <style>
              body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding-top: 40px;
    height: 100vh;
    width: 100vw;
    display: flex;
    justify-content: flex-end; /* ƒê·∫©y sang ph·∫£i */
    align-items: flex-start; /* C·ªë ƒë·ªãnh l√™n tr√™n */
}
.content-container {
    width: 85%; /* Chi·∫øm 80% chi·ªÅu ngang */
    background-color: white;
    padding: 20px;
    margin-top: 20px; /* C√°ch top m·ªôt ch√∫t */
    margin-right: 20px; /* C√°ch ph·∫£i m·ªôt ch√∫t */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* ƒê·ªï b√≥ng nh·∫π */
    border-radius: 8px; /* Bo g√≥c */
}
    
        h1, h3 {
            color: #333;
            text-align: center;
        }
    
        .container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
          
        }
    
        .box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            width: 48%;
        }
    
        label {
            font-weight: bold;
            display: block;
            margin-top: 10px;
        }
    
        input, textarea {
            width: 97%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
           
        }
    
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
    
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
    
        th {
            background-color: #007bff;
            color: white;
        }
    
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    
        button {
            background-color: #28a745;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
    
        button:hover {
            background-color: #218838;
        }
    
        .dialog {
            display: none;
            position: fixed;
            top: 20%;
            left: 30%;
            width: 40%;
            background: white;
            padding: 20px;
            border: 2px solid #333;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
        }
    
        .close-btn {
            background-color: red;
            float: right;
        }
    
        .total {
            font-size: 18px;
            font-weight: bold;
            text-align: right;
            margin-top: 10px;
        }
        .box1 {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            width: 47%;
            padding-bottom: 30px;
           
}
#attributeDialog {
    display: none;
    position: fixed;
    top: 20%;
    left: 30%;
    width: 40%;
    background: white;
    align-content: center;
    padding: 20px;
    border: 2px solid #333;
    border-radius: 8px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
}

/* Nh√≥m thu·ªôc t√≠nh */
.attribute-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 15px;
}

/* M·ªói item c·ªßa thu·ªôc t√≠nh */
.attribute-item {
    display: flex;
    align-items: center;
    gap: 5px;
    background: #f9f9f9;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
}

/* Ch·ªânh s·ª≠a button ch·ªçn thu·ªôc t√≠nh */
.small-btn {
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 5px;
    cursor: pointer;
    font-size: 14px;
    margin-left: 5px;
}

.small-btn:hover {
    background-color: #0056b3;
}
/* T·ªïng ti·ªÅn & N√∫t T·∫°o ƒê∆°n H√†ng n·ªïi c·ªë ƒë·ªãnh ·ªü bottom */
.fixed-bottom-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #ffffff;
    padding: 15px 20px;
    border-top: 2px solid #ddd;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0px -2px 10px rgba(0, 0, 0, 0.1);
}

/* T·ªïng ti·ªÅn */
.total-text {
    font-size: 20px;
    font-weight: bold;
    color: #333;
}

/* N√∫t T·∫°o ƒê∆°n H√†ng */
.submit-btn {
    background-color: #007bff;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    margin-right: 60px;
    font-weight: bold;
}

.submit-btn:hover {
    background-color: #0056b3;
}
    </style>
    
</head>
<body>
<div class="content-container">
    <h1>T·∫°o ƒê∆°n H√†ng</h1>

    <div class="container">
        <!-- Th√¥ng tin kh√°ch h√†ng -->
        <div class="box">
            <h3>Th√¥ng tin kh√°ch h√†ng</h3>
            <input type="hidden" id="customerID">
            <label>T√™n kh√°ch h√†ng:</label>
            <input type="text" id="customerName" name="customerName" required>
            
            <label>S·ªë ƒëi·ªán tho·∫°i:</label>
            <input type="text" id="customerPhone" name="customerPhone" required>
            
            <label>Email:</label>
            <input type="email" id="customerEmail" name="customerEmail" required>
            
            <label>ƒê·ªãa ch·ªâ:</label>
            <input type="text" id="customerAddress" name="customerAddress" required>
    
            <button type="button" onclick="openCustomerDialog()">Ch·ªçn Kh√°ch H√†ng</button>
        </div>
    
        <!-- Th√¥ng tin s·∫£n ph·∫©m -->
        <div class="box">
            <h3>Ch·ªçn S·∫£n Ph·∫©m</h3>
            <button type="button" onclick="openProductDialog()" >Th√™m S·∫£n Ph·∫©m</button>
            <table>
                <tr>
                    <th>·∫¢nh</th>
                    <th>T√™n</th>
                    <th>Thu·ªôc t√≠nh</th>
                    <th>S·ªë l∆∞·ª£ng t·ªìn</th>
                    <th>Gi√°</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>Th√†nh ti·ªÅn</th>
                </tr>
                <tbody id="selectedProducts"></tbody>
            </table>
        </div>
    </div>
<div style="margin-top: 30px;display: flex;justify-content: space-between;margin-bottom: 70px;">
    <div class="box1">
        <h3>H√¨nh th·ª©c giao h√†ng</h3>
        <input type="radio" name="shippingMethod" value="self" checked onchange="toggleShippingInfo()"> T·ª± giao h√†ng
        <input type="radio" name="shippingMethod" value="service" onchange="toggleShippingInfo()"> Giao h√†ng qua ƒë∆°n v·ªã v·∫≠n chuy·ªÉn
    </div>
    
    <!-- Th√¥ng tin giao h√†ng khi ch·ªçn "T·ª± giao h√†ng" -->
    <div class="box1" id="shippingInfo" style="display:block;">
        <h3>Th√¥ng tin giao h√†ng</h3>
        <div style="display: flex;justify-content: space-between;">
        <div style="width: 45%;
        height: 100%;
     
        align-items: center;
        justify-content: center;">
        <label>T√™n kh√°ch h√†ng:</label> <span id="shippingCustomerNameText">Ch∆∞a c√≥</span>
        <label>S·ªë ƒëi·ªán tho·∫°i:</label> <span id="shippingCustomerPhoneText">Ch∆∞a c√≥</span>
        </div>
       <div style="width: 45%;
       height: 100%;
       align-items: center;
       justify-content: center;">
         <label>Email:</label> <span id="shippingCustomerEmailText">Ch∆∞a c√≥</span>
        <label>ƒê·ªãa ch·ªâ giao h√†ng:</label> <span id="shippingCustomerAddressText">Ch∆∞a c√≥</span>
    
       </div>
        </div>
        <label>Ghi ch√∫:</label>
        <textarea id="shippingNotes" name="shippingNotes" rows="3" placeholder="Nh·∫≠p ghi ch√∫ n·∫øu c·∫ßn..."></textarea>
    </div>
</div>
<div class="fixed-bottom-bar">
    <h3 class="total-text" style="margin-left: 20px;">T·ªïng ti·ªÅn: <span id="totalAmount">0</span> VND</h3>
    <button type="submit" class="submit-btn" onclick='createOrder()'>T·∫°o ƒê∆°n H√†ng</button>
</div>

 <!-- Dialog ch·ªçn s·∫£n ph·∫©m -->
 <div id="productDialog" style="display:none; position:fixed; top:20%; left:30%; width:40%; background:white; padding:20px; border:1px solid black;">
    <h3>Ch·ªçn S·∫£n Ph·∫©m</h3>
    <table border="1">
        <tr>
            <th>·∫¢nh</th>
            <th>T√™n</th>
            <th>Thu·ªôc t√≠nh</th>
            <th>Gi√°</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>Ch·ªçn</th>
        </tr>
        <% products.forEach(product => { %>
            <tr>
                <td><img src="<%= product.thumbnail %>" width="50"></td>
                <td><%= product.name %></td>
                <td>
                   
    <span id="selected-attributes-<%= product._id %>">Ch∆∞a ch·ªçn</span>
    <button type="button" class="small-btn" 
        onclick='openAttributeDialog("<%= product._id %>", "<%= product.name %>", <%- JSON.stringify(product.attributes) %>)'>
        üõ†Ô∏è
    </button>

                 
                </td>
                <td><%= product.price.toLocaleString() %> VND</td>
                <td><%= product.inventory %></td>
                <td>
                    <input type="checkbox" id="productCheckbox-<%= product._id %>" 
                    disabled 
                    onchange="toggleProductSelection(this, '<%= product._id %>', '<%= product.name %>', '<%= product.price %>', '<%= product.thumbnail %>', '<%= product.inventory %>', decodeURIComponent('<%= encodeURIComponent(JSON.stringify(product.attributes)) %>'))">
     </td>
            </tr>
        <% }) %>
    </table>
    <button onclick="saveSelectedProducts()">L∆∞u</button>
    <button onclick="closeProductDialog()">ƒê√≥ng</button>
</div>
<!-- Dialog ch·ªçn thu·ªôc t√≠nh -->
<div id="attributeDialog" class="dialog" style="display:none;">
    <h3>Ch·ªçn Thu·ªôc T√≠nh</h3>
    <div id="attributeOptions"></div>
    <button onclick="saveAttributeSelection()">L∆∞u</button>
    <button onclick="closeAttributeDialog()">ƒê√≥ng</button>
</div>
    <!-- Dialog ch·ªçn kh√°ch h√†ng -->
    <div id="customerDialog" style="display:none; position:fixed; top:20%; left:30%; width:40%; background:white; padding:20px; border:1px solid black;">
        <h3>Ch·ªçn Kh√°ch H√†ng</h3>
        <table border="1">
            <tr>
                <th>T√™n</th>
                <th>ƒêi·ªán tho·∫°i</th>
                <th>Email</th>
                <th>ƒê·ªãa ch·ªâ</th>
                <th>Ch·ªçn</th>
            </tr>
            <% customers.forEach(customer => { %>
                <tr>
                    <td><%= customer.fullName %></td>
                    <td><%= customer.phoneNumber %></td>
                    <td><%= customer.email %></td>
                    <td><%= customer.address %></td>
                    <td><button type="button" onclick="selectCustomer( '<%= customer.id %>', '<%= customer.fullName %>', '<%= customer.phoneNumber %>', '<%= customer.email %>', '<%= customer.address %>')">Ch·ªçn</button></td>
                </tr>
            <% }) %>
        </table>
        <button onclick="closeCustomerDialog()">ƒê√≥ng</button>
    </div>
</div>
</body>
</html>
